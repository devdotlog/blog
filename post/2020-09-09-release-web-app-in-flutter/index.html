<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="뭐라도 좀 적고, 써야 남지 않을까?">
    
    <link rel="shortcut icon" href="https://sh0seo.github.io/favicon.ico">
    
    <link rel="stylesheet" href="/css/style.min.css">

    <title>Flutter로 개발한 Web App을 Release 모드로 테스트하기</title>
</head>
<body><header id="banner">
    <h2><a href="https://sh0seo.github.io/">my side projects</a></h2>
    <nav>
        <ul>
            <li>
                <a href="/project/projects/" title="My Toy Projects">My Toy Projects</a>
            </li><li>
                <a href="/" title="posts">posts</a>
            </li><li>
                <a href="/about/" title="about">about</a>
            </li>
        </ul>
    </nav>
</header>
<main id="content">
<article>
    <header id="post-header">
        <h1>Flutter로 개발한 Web App을 Release 모드로 테스트하기</h1><time>September 9, 2020</time></header><p><img src="https://sh0seo.github.io/images/release.png" alt="release"></p>
<p>Flutter를 이용하여 Web App을 개발했다면, 서버에 Deploy 하기 전에 Release 상태로 테스트를 진행해야 합니다.</p>
<p>테스트는 아래와 같은 순서로 진행합니다.</p>
<ol>
<li>Web App을 Release 모드로 build</li>
<li>Web Server 실행</li>
<li>테스트</li>
</ol>
<h2 id="release-모드로-build">Release 모드로 build</h2>
<p>대상 프로젝트로 이동하고 command 라인에서 다음 명령을 실행하여 빌드합니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">$ flutter build web
</code></pre></div><p>정상적으로 빌드가 되었다면 프로젝트 폴더 내에 <code>프로젝트폴더/build/web</code> 디렉토리에 index.html 파일을 포함한 release 파일들이 생성된 것을 확인할 수 있습니다.</p>
<p><img src="https://sh0seo.github.io/images/release-web.png" alt="release-web"></p>
<h2 id="web-server-실행">Web Server 실행</h2>
<p>빌드된 소스는 정적 웹페이지 리소스입니다. apache, nginx 등의 웹 서버가 설치되어 있다면 로컬에서 바로 실행하여 테스트가 가능합니다.
하지만 별도의 웹 서버 없이 go 혹은 python을 이용하여 손쉽게 이용이 가능합니다.</p>
<h3 id="python-웹서버">python 웹서버</h3>
<p>미리 빌드한 build/web 디렉토리로 이동하여 아래와 같이 실행하면 <code>127.0.0.1:8080</code> 주소로 브라우저에서 확인이 가능합니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">$ python -m http.server --bind 127.0.0.1 <span class="m">8080</span>
</code></pre></div><h3 id="go를-이용한-웹서버">go를 이용한 웹서버</h3>
<p>go는 정적파일 웹서버를 구동하기 위해 심플한 코딩이 필요합니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// main.go
</span><span class="c1"></span><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;net/http&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">http</span><span class="p">.</span><span class="nf">Handle</span><span class="p">(</span><span class="s">&#34;/&#34;</span><span class="p">,</span> <span class="nx">http</span><span class="p">.</span><span class="nf">FileServer</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nf">Dir</span><span class="p">(</span><span class="s">&#34;./&#34;</span><span class="p">)))</span>
  <span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;:8080&#34;</span><span class="p">,</span> <span class="kc">nil</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">$ go run main.go
</code></pre></div><h2 id="release-소스를-deploy-없이-테스트">Release 소스를 Deploy 없이 테스트</h2>
<p>aws, google cloud, cafe24와 같은 웹 호스팅 계정이 있다면 테스트가 끝난 소스를 업로드하여 public 환경에서 테스트가 가능합니다. 하지만 그런 여건이 되지 않는다면 로컬 환경에서 구동된 상태로 외부에 공개할 수 있는 방법이 있습니다.</p>
<p><a href="https://ngrok.com/">ngrok</a> 서비스를 이용하면 로컬 서버를 public ip로 공개하여 누구나 사용할 수 있습니다. 무료만으로도 사용은 가능하지만 속도가 느리고 동시에 접속이 불가능한 점이 있지만, 급하게 시연을 하거나 개발 결과를 보고하기 위한 용도 정도를 사용이 가능합니다. ngrok은 go 언어를 이용하여 개발된 서비스로 windows, linux, macos 어떤 환경에서든 동일하게 사용이 가능합니다.</p>
<p>go(혹은 python)으로 구동 중인 로컬의 서버의 주소는 <code>127.0.0.1:8080</code> 라고 하면, ngrok 으로 아래와 같이 command에서 실행합니다.</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">$ ngrok http <span class="m">8080</span>
</code></pre></div><p>ngrok이 실행되면 임시 URL이 화면에 출력됩니다. 해당 URL로 접속하면 로컬의 8080 서버로 http 요청을 전달해주게 됩니다.</p>
<p><img src="https://sh0seo.github.io/images/release-ngrok-result.png" alt="release-ngrok"></p>
<h2 id="참조">참조</h2>
<ul>
<li><a href="https://flutter.dev/docs/deployment/web#building-the-app-for-release">flutter의 공식 페이지 가이드</a></li>
<li><a href="https://ngrok.com/">ngrok 홈페이지</a></li>
</ul>
</article>

        </main><footer id="footer">
    sh0seo All rights reserved.
</footer>
</body>
</html>
