<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Flutter로 개발한 Web App을 Release 모드로 테스트하기 - my blog</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-156450601-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo logo--mixed">
		<a class="logo__link" href="/" title="My Blog" rel="home">
			<div class="logo__item logo__imagebox">
					<img class="logo__img" src="/img/logo.png">
				</div><div class="logo__item logo__text">
					<div class="logo__title">My Blog</div>
					<div class="logo__tagline">Just do it</div>
				</div>
		</a>
	</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/">
				
				<span class="menu__text">Home</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/post/">
				
				<span class="menu__text">All posts</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/tags">
				
				<span class="menu__text">Tags</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/about/">
				
				<span class="menu__text">About</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/project/">
				
				<span class="menu__text">Projects</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Flutter로 개발한 Web App을 Release 모드로 테스트하기</h1>
			
		</header><div class="content post__content clearfix">
			<p><img src="https://sh0seo.github.io/images/release.png" alt="release"></p>
<p>Flutter를 이용하여 Web App을 개발했다면, 서버에 Deploy 하기 전에 Release 상태로 테스트를 진행해야 합니다.</p>
<p>테스트는 아래와 같은 순서로 진행합니다.</p>
<ol>
<li>Web App을 Release 모드로 build</li>
<li>Web Server 실행</li>
<li>테스트</li>
</ol>
<h2 id="release-모드로-build">Release 모드로 build</h2>
<p>대상 프로젝트로 이동하고 command 라인에서 다음 명령을 실행하여 빌드합니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ flutter build web
</code></pre></div><p>정상적으로 빌드가 되었다면 프로젝트 폴더 내에 <code>프로젝트폴더/build/web</code> 디렉토리에 index.html 파일을 포함한 release 파일들이 생성된 것을 확인할 수 있습니다.</p>
<p><img src="https://sh0seo.github.io/images/release-web.png" alt="release-web"></p>
<h2 id="web-server-실행">Web Server 실행</h2>
<p>빌드된 소스는 정적 웹페이지 리소스입니다. apache, nginx 등의 웹 서버가 설치되어 있다면 로컬에서 바로 실행하여 테스트가 가능합니다.
하지만 별도의 웹 서버 없이 go 혹은 python을 이용하여 손쉽게 이용이 가능합니다.</p>
<h3 id="python-웹서버">python 웹서버</h3>
<p>미리 빌드한 build/web 디렉토리로 이동하여 아래와 같이 실행하면 <code>127.0.0.1:8080</code> 주소로 브라우저에서 확인이 가능합니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ python -m http.server --bind 127.0.0.1 <span style="color:#ae81ff">8080</span>
</code></pre></div><h3 id="go를-이용한-웹서버">go를 이용한 웹서버</h3>
<p>go는 정적파일 웹서버를 구동하기 위해 심플한 코딩이 필요합니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// main.go
</span><span style="color:#75715e"></span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;net/http&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
  <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Handle</span>(<span style="color:#e6db74">&#34;/&#34;</span>, <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">FileServer</span>(<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Dir</span>(<span style="color:#e6db74">&#34;./&#34;</span>)))
  <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ListenAndServe</span>(<span style="color:#e6db74">&#34;:8080&#34;</span>, <span style="color:#66d9ef">nil</span>)
}
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ go run main.go
</code></pre></div><h2 id="release-소스를-deploy-없이-테스트">Release 소스를 Deploy 없이 테스트</h2>
<p>aws, google cloud, cafe24와 같은 웹 호스팅 계정이 있다면 테스트가 끝난 소스를 업로드하여 public 환경에서 테스트가 가능합니다. 하지만 그런 여건이 되지 않는다면 로컬 환경에서 구동된 상태로 외부에 공개할 수 있는 방법이 있습니다.</p>
<p><a href="https://ngrok.com/">ngrok</a> 서비스를 이용하면 로컬 서버를 public ip로 공개하여 누구나 사용할 수 있습니다. 무료만으로도 사용은 가능하지만 속도가 느리고 동시에 접속이 불가능한 점이 있지만, 급하게 시연을 하거나 개발 결과를 보고하기 위한 용도 정도를 사용이 가능합니다. ngrok은 go 언어를 이용하여 개발된 서비스로 windows, linux, macos 어떤 환경에서든 동일하게 사용이 가능합니다.</p>
<p>go(혹은 python)으로 구동 중인 로컬의 서버의 주소는 <code>127.0.0.1:8080</code> 라고 하면, ngrok 으로 아래와 같이 command에서 실행합니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ ngrok http <span style="color:#ae81ff">8080</span>
</code></pre></div><p>ngrok이 실행되면 임시 URL이 화면에 출력됩니다. 해당 URL로 접속하면 로컬의 8080 서버로 http 요청을 전달해주게 됩니다.</p>
<p><img src="https://sh0seo.github.io/images/release-ngrok-result.png" alt="release-ngrok"></p>
<h2 id="참조">참조</h2>
<ul>
<li><a href="https://flutter.dev/docs/deployment/web#building-the-app-for-release">flutter의 공식 페이지 가이드</a></li>
<li><a href="https://ngrok.com/">ngrok 홈페이지</a></li>
</ul>

		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/flutter/" rel="tag">flutter</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/web/" rel="tag">web</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/release/" rel="tag">release</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>



<section class="comments">
	<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "devdotlog" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2020 my blog.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>